@use "sass:list";

@use "../helpers" as *;

@function -vendored-shadow-keys($map) {
	$map: ();
	@each $mk, $mv in $map {
		$map: list.append($map, var(--dm-shadow-#{$mk}), comma);
	}
	@return $map;
}

@mixin box-shadow($variants...) {
	@include variants($variants...) using ($v) {
		#{variant(shadow, $v)} {
			@each $mk, $mv in configuration.$shadow-map {
				--dm-shadow-#{$mk}: 0 0 transparent;
			}
			box-shadow: -vendored-shadow-keys(configuration.$shadow-map);
		}

		@each $mk, $mv in configuration.$shadow-map {
			#{variant(shadow-#{$mk}, $v)} {
				--dm-shadow-#{$mk}: #{shadow-var($mv)};
			}
		}
	}
}

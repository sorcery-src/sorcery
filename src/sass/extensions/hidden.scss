@use "../helpers" as *;

$-opts: (
	hstack: flex,
	vstack: flex,
	zstack: grid,
	grid: grid,
);

@mixin hidden($variants...) {
	@include variants($variants...) using ($v) {
		@if matches($v, core) {
			:root {
				--dm-display-initial: block;
				--dm-display: var(--dm-display-initial);
			}

			// NOTE: Takes precedence.
			@each $k, $v in $-opts {
				.#{$k} > * {
					--dm-display: var(--dm-display-initial);
				}
			}

			@each $k, $v in $-opts {
				.#{$k} {
					--dm-display: #{$v};
				}
			}
		}

		#{variant(hidden, $v)} {
			display: none;
		}
		#{variant(unhidden, $v)} {
			display: var(--dm-display);
		}
	}
}

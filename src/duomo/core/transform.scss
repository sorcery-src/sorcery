@use "../helpers" as *;

$-translate-opts: (-100, -50, 0, 50, 100);

// TODO: Use `percent-range`?
//
// prettier-ignore
$-scale-opts: (
	0, 0.1, 0.2, 0.25, 0.3, 0.4, 0.5, 0.6, 0.7, 0.75, 0.8, 0.9, 1,
	1.1, 1.2, 1.25, 1.3, 1.4, 1.5, 1.6, 1.7, 1.75, 1.8, 1.9, 2,
);

@mixin transform($variants...) {
	@include variants($variants...) using ($v) {
		#{variant(transform, $v)} {
			--transform-translate-x: 0;
			--transform-translate-y: 0;
			--transform-scale: 1;
			transform: translate(var(--transform-translate-x), var(--transform-translate-y)) scale(var(--transform-scale));
		}

		#{variant(transform-gpu, $v)} {
			--transform-translate-x: 0;
			--transform-translate-y: 0;
			--transform-scale: 1;
			transform: translate3d(var(--transform-translate-x), var(--transform-translate-y), 0)
				scale(var(--transform-scale));
		}

		@each $axis in (x, y) {
			@each $opt in $-translate-opts {
				#{variant(#{n($opt)}translate-#{$axis}-#{abs($opt)}, $v)} {
					--transform-translate-#{$axis}: #{$opt + "%"};
				}
			}
		}

		@each $opt in $-scale-opts {
			#{variant(scale-#{abs($opt * 100)}, $v)} {
				--transform-scale: #{$opt};
			}
		}
	}
}
